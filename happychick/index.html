<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Frame Animation</title>
</head>
<body>
    <h1>Canvas Frame Animation</h1>
    <canvas id="myCanvas" width="400" height="200" style="border:1px solid #000000;">
        Your browser does not support the HTML5 canvas tag.
    </canvas>

    <script>
        var canvas = document.getElementById('myCanvas');
        var ctx = canvas.getContext('2d');

        // 图片路径
        var imagePaths = ['images/idle1.png', 'images/idle2.png'];
        var images = []; // 存储加载的图片
        var currentFrame = 0; // 当前帧索引
        var frameCount = imagePaths.length; // 总帧数
        var x = 50; // 图片的 x 坐标
        var y = 50; // 图片的 y 坐标
        var frameDelay = 200; // 每帧的延迟时间（毫秒）

        // 加载所有图片
        function loadImages() {
            var loadedCount = 0;
            imagePaths.forEach(function(path, index) {
                var img = new Image();
                img.src = path;
                img.onload = function() {
                    loadedCount++;
                    if (loadedCount === frameCount) {
                        // 所有图片加载完成后启动动画
                        setTimeout(draw, frameDelay);
                    }
                };
                img.onerror = function() {
                    console.error('Failed to load image:', path);
                };
                images[index] = img;
            });
        }

        // 绘制动画
        function draw() {
            // 清空 Canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 绘制当前帧的图片
            ctx.drawImage(images[currentFrame], x, y);

            // 切换到下一帧
            currentFrame = (currentFrame + 1) % frameCount;

            // 请求下一帧动画
            setTimeout(draw, frameDelay);
        }

        // 启动图片加载
        loadImages();
    </script>
</body>
</html>
